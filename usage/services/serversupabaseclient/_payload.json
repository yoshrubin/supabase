[{"data":1,"prerenderedAt":735},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseclient":58,"/usage/services/serversupabaseclient-surround":729},[4,8,12,46,50,54],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","i-heroicons-rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","i-heroicons-lock-closed",{"title":13,"_path":14,"children":15,"icon":45},"Usage","/usage",[16,29],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23,26],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseSession","/usage/composables/usesupabasesession",{"title":27,"_path":28},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":30,"_path":31,"children":32},"Server services","/usage/services",[33,36,39,42],{"title":34,"_path":35},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":37,"_path":38},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":40,"_path":41},"serverSupabaseSession","/usage/services/serversupabasesession",{"title":43,"_path":44},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":47,"_path":48,"icon":49},"Demo","/demo","i-heroicons-computer-desktop-20-solid",{"title":51,"_path":52,"icon":53},"Changelog","/changelog","i-heroicons-bookmark",{"title":55,"_path":56,"icon":57},"Roadmap","/roadmap","i-heroicons-map",{"_path":35,"_dir":59,"_draft":60,"_partial":60,"_locale":61,"title":34,"description":62,"body":63,"_type":724,"_id":725,"_source":726,"_file":727,"_extension":728},"services",false,"","Make requests to the Supabase API on server side with the serverSupabaseClient service",{"type":64,"children":65,"toc":722},"root",[66,91,111,139,463,468,573,587,716],{"type":67,"tag":68,"props":69,"children":72},"element","callout",{"color":70,"icon":71},"amber","i-heroicons-exclamation-triangle-20-solid",[73],{"type":67,"tag":74,"props":75,"children":76},"p",{},[77,80,89],{"type":78,"value":79},"text","This section assumes you're familiar with ",{"type":67,"tag":81,"props":82,"children":86},"a",{"href":83,"rel":84},"https://v3.nuxtjs.org/guide/concepts/server-engine",[85],"nofollow",[87],{"type":78,"value":88},"Nitro",{"type":78,"value":90},", the server engine powered by Nuxt.",{"type":67,"tag":74,"props":92,"children":93},{},[94,96,100,102,109],{"type":78,"value":95},"This function is working similary as the ",{"type":67,"tag":81,"props":97,"children":98},{"href":22},[99],{"type":78,"value":21},{"type":78,"value":101}," composable but is designed to be used in ",{"type":67,"tag":81,"props":103,"children":106},{"href":104,"rel":105},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[85],[107],{"type":78,"value":108},"server routes",{"type":78,"value":110},".",{"type":67,"tag":74,"props":112,"children":113},{},[114,116,122,124,130,132,137],{"type":78,"value":115},"Define your server route and just import the ",{"type":67,"tag":117,"props":118,"children":120},"code",{"className":119},[],[121],{"type":78,"value":34},{"type":78,"value":123}," from ",{"type":67,"tag":117,"props":125,"children":127},{"className":126},[],[128],{"type":78,"value":129},"#supabase/server",{"type":78,"value":131},". Be careful,  ",{"type":67,"tag":117,"props":133,"children":135},{"className":134},[],[136],{"type":78,"value":34},{"type":78,"value":138}," is returning a promise.",{"type":67,"tag":140,"props":141,"children":146},"pre",{"className":142,"code":143,"filename":144,"language":145,"meta":61,"style":61},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseClient } from '#supabase/server'\n\nexport default eventHandler(async (event) => {\n  const client = await serverSupabaseClient(event)\n\n  const { data } = await client.from('libraries').select('*')\n\n  return { libraries: data }\n})\n","server/api/libraries.ts","ts",[147],{"type":67,"tag":117,"props":148,"children":149},{"__ignoreMap":61},[150,199,209,266,308,316,410,418,450],{"type":67,"tag":151,"props":152,"children":155},"span",{"class":153,"line":154},"line",1,[156,162,168,174,179,184,189,194],{"type":67,"tag":151,"props":157,"children":159},{"style":158},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[160],{"type":78,"value":161},"import",{"type":67,"tag":151,"props":163,"children":165},{"style":164},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[166],{"type":78,"value":167}," {",{"type":67,"tag":151,"props":169,"children":171},{"style":170},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[172],{"type":78,"value":173}," serverSupabaseClient",{"type":67,"tag":151,"props":175,"children":176},{"style":164},[177],{"type":78,"value":178}," }",{"type":67,"tag":151,"props":180,"children":181},{"style":158},[182],{"type":78,"value":183}," from",{"type":67,"tag":151,"props":185,"children":186},{"style":164},[187],{"type":78,"value":188}," '",{"type":67,"tag":151,"props":190,"children":192},{"style":191},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[193],{"type":78,"value":129},{"type":67,"tag":151,"props":195,"children":196},{"style":164},[197],{"type":78,"value":198},"'\n",{"type":67,"tag":151,"props":200,"children":202},{"class":153,"line":201},2,[203],{"type":67,"tag":151,"props":204,"children":206},{"emptyLinePlaceholder":205},true,[207],{"type":78,"value":208},"\n",{"type":67,"tag":151,"props":210,"children":212},{"class":153,"line":211},3,[213,218,223,229,234,240,245,251,256,261],{"type":67,"tag":151,"props":214,"children":215},{"style":158},[216],{"type":78,"value":217},"export",{"type":67,"tag":151,"props":219,"children":220},{"style":158},[221],{"type":78,"value":222}," default",{"type":67,"tag":151,"props":224,"children":226},{"style":225},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[227],{"type":78,"value":228}," eventHandler",{"type":67,"tag":151,"props":230,"children":231},{"style":170},[232],{"type":78,"value":233},"(",{"type":67,"tag":151,"props":235,"children":237},{"style":236},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[238],{"type":78,"value":239},"async",{"type":67,"tag":151,"props":241,"children":242},{"style":164},[243],{"type":78,"value":244}," (",{"type":67,"tag":151,"props":246,"children":248},{"style":247},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[249],{"type":78,"value":250},"event",{"type":67,"tag":151,"props":252,"children":253},{"style":164},[254],{"type":78,"value":255},")",{"type":67,"tag":151,"props":257,"children":258},{"style":236},[259],{"type":78,"value":260}," =>",{"type":67,"tag":151,"props":262,"children":263},{"style":164},[264],{"type":78,"value":265}," {\n",{"type":67,"tag":151,"props":267,"children":269},{"class":153,"line":268},4,[270,275,280,285,290,294,299,303],{"type":67,"tag":151,"props":271,"children":272},{"style":236},[273],{"type":78,"value":274},"  const",{"type":67,"tag":151,"props":276,"children":277},{"style":170},[278],{"type":78,"value":279}," client",{"type":67,"tag":151,"props":281,"children":282},{"style":164},[283],{"type":78,"value":284}," =",{"type":67,"tag":151,"props":286,"children":287},{"style":158},[288],{"type":78,"value":289}," await",{"type":67,"tag":151,"props":291,"children":292},{"style":225},[293],{"type":78,"value":173},{"type":67,"tag":151,"props":295,"children":297},{"style":296},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[298],{"type":78,"value":233},{"type":67,"tag":151,"props":300,"children":301},{"style":170},[302],{"type":78,"value":250},{"type":67,"tag":151,"props":304,"children":305},{"style":296},[306],{"type":78,"value":307},")\n",{"type":67,"tag":151,"props":309,"children":311},{"class":153,"line":310},5,[312],{"type":67,"tag":151,"props":313,"children":314},{"emptyLinePlaceholder":205},[315],{"type":78,"value":208},{"type":67,"tag":151,"props":317,"children":319},{"class":153,"line":318},6,[320,324,328,333,337,341,345,349,353,358,362,367,372,376,380,384,389,393,397,402,406],{"type":67,"tag":151,"props":321,"children":322},{"style":236},[323],{"type":78,"value":274},{"type":67,"tag":151,"props":325,"children":326},{"style":164},[327],{"type":78,"value":167},{"type":67,"tag":151,"props":329,"children":330},{"style":170},[331],{"type":78,"value":332}," data",{"type":67,"tag":151,"props":334,"children":335},{"style":164},[336],{"type":78,"value":178},{"type":67,"tag":151,"props":338,"children":339},{"style":164},[340],{"type":78,"value":284},{"type":67,"tag":151,"props":342,"children":343},{"style":158},[344],{"type":78,"value":289},{"type":67,"tag":151,"props":346,"children":347},{"style":170},[348],{"type":78,"value":279},{"type":67,"tag":151,"props":350,"children":351},{"style":164},[352],{"type":78,"value":110},{"type":67,"tag":151,"props":354,"children":355},{"style":225},[356],{"type":78,"value":357},"from",{"type":67,"tag":151,"props":359,"children":360},{"style":296},[361],{"type":78,"value":233},{"type":67,"tag":151,"props":363,"children":364},{"style":164},[365],{"type":78,"value":366},"'",{"type":67,"tag":151,"props":368,"children":369},{"style":191},[370],{"type":78,"value":371},"libraries",{"type":67,"tag":151,"props":373,"children":374},{"style":164},[375],{"type":78,"value":366},{"type":67,"tag":151,"props":377,"children":378},{"style":296},[379],{"type":78,"value":255},{"type":67,"tag":151,"props":381,"children":382},{"style":164},[383],{"type":78,"value":110},{"type":67,"tag":151,"props":385,"children":386},{"style":225},[387],{"type":78,"value":388},"select",{"type":67,"tag":151,"props":390,"children":391},{"style":296},[392],{"type":78,"value":233},{"type":67,"tag":151,"props":394,"children":395},{"style":164},[396],{"type":78,"value":366},{"type":67,"tag":151,"props":398,"children":399},{"style":191},[400],{"type":78,"value":401},"*",{"type":67,"tag":151,"props":403,"children":404},{"style":164},[405],{"type":78,"value":366},{"type":67,"tag":151,"props":407,"children":408},{"style":296},[409],{"type":78,"value":307},{"type":67,"tag":151,"props":411,"children":413},{"class":153,"line":412},7,[414],{"type":67,"tag":151,"props":415,"children":416},{"emptyLinePlaceholder":205},[417],{"type":78,"value":208},{"type":67,"tag":151,"props":419,"children":421},{"class":153,"line":420},8,[422,427,431,436,441,445],{"type":67,"tag":151,"props":423,"children":424},{"style":158},[425],{"type":78,"value":426},"  return",{"type":67,"tag":151,"props":428,"children":429},{"style":164},[430],{"type":78,"value":167},{"type":67,"tag":151,"props":432,"children":433},{"style":296},[434],{"type":78,"value":435}," libraries",{"type":67,"tag":151,"props":437,"children":438},{"style":164},[439],{"type":78,"value":440},":",{"type":67,"tag":151,"props":442,"children":443},{"style":170},[444],{"type":78,"value":332},{"type":67,"tag":151,"props":446,"children":447},{"style":164},[448],{"type":78,"value":449}," }\n",{"type":67,"tag":151,"props":451,"children":453},{"class":153,"line":452},9,[454,459],{"type":67,"tag":151,"props":455,"children":456},{"style":164},[457],{"type":78,"value":458},"}",{"type":67,"tag":151,"props":460,"children":461},{"style":170},[462],{"type":78,"value":307},{"type":67,"tag":74,"props":464,"children":465},{},[466],{"type":78,"value":467},"Then call your API route from any vue file:",{"type":67,"tag":140,"props":469,"children":472},{"className":142,"code":470,"filename":471,"language":145,"meta":61,"style":61},"const fetchLibrary = async () => {\n  const { libraries } = await $fetch('/api/libraries')\n}\n","pages/index.vue",[473],{"type":67,"tag":117,"props":474,"children":475},{"__ignoreMap":61},[476,512,565],{"type":67,"tag":151,"props":477,"children":478},{"class":153,"line":154},[479,484,489,494,499,504,508],{"type":67,"tag":151,"props":480,"children":481},{"style":236},[482],{"type":78,"value":483},"const",{"type":67,"tag":151,"props":485,"children":486},{"style":170},[487],{"type":78,"value":488}," fetchLibrary ",{"type":67,"tag":151,"props":490,"children":491},{"style":164},[492],{"type":78,"value":493},"=",{"type":67,"tag":151,"props":495,"children":496},{"style":236},[497],{"type":78,"value":498}," async",{"type":67,"tag":151,"props":500,"children":501},{"style":164},[502],{"type":78,"value":503}," ()",{"type":67,"tag":151,"props":505,"children":506},{"style":236},[507],{"type":78,"value":260},{"type":67,"tag":151,"props":509,"children":510},{"style":164},[511],{"type":78,"value":265},{"type":67,"tag":151,"props":513,"children":514},{"class":153,"line":201},[515,519,523,527,531,535,539,544,548,552,557,561],{"type":67,"tag":151,"props":516,"children":517},{"style":236},[518],{"type":78,"value":274},{"type":67,"tag":151,"props":520,"children":521},{"style":164},[522],{"type":78,"value":167},{"type":67,"tag":151,"props":524,"children":525},{"style":170},[526],{"type":78,"value":435},{"type":67,"tag":151,"props":528,"children":529},{"style":164},[530],{"type":78,"value":178},{"type":67,"tag":151,"props":532,"children":533},{"style":164},[534],{"type":78,"value":284},{"type":67,"tag":151,"props":536,"children":537},{"style":158},[538],{"type":78,"value":289},{"type":67,"tag":151,"props":540,"children":541},{"style":225},[542],{"type":78,"value":543}," $fetch",{"type":67,"tag":151,"props":545,"children":546},{"style":296},[547],{"type":78,"value":233},{"type":67,"tag":151,"props":549,"children":550},{"style":164},[551],{"type":78,"value":366},{"type":67,"tag":151,"props":553,"children":554},{"style":191},[555],{"type":78,"value":556},"/api/libraries",{"type":67,"tag":151,"props":558,"children":559},{"style":164},[560],{"type":78,"value":366},{"type":67,"tag":151,"props":562,"children":563},{"style":296},[564],{"type":78,"value":307},{"type":67,"tag":151,"props":566,"children":567},{"class":153,"line":211},[568],{"type":67,"tag":151,"props":569,"children":570},{"style":164},[571],{"type":78,"value":572},"}\n",{"type":67,"tag":74,"props":574,"children":575},{},[576,578,585],{"type":78,"value":577},"Be careful, if you want to call this route on SSR, please read this ",{"type":67,"tag":81,"props":579,"children":582},{"href":580,"rel":581},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[85],[583],{"type":78,"value":584},"section",{"type":78,"value":586},", you must send your browser cookies including your supabase token.",{"type":67,"tag":140,"props":588,"children":590},{"className":142,"code":589,"filename":471,"language":145,"meta":61,"style":61},"const { data: { libraries }} = await useFetch('/api/libraries', {\n  headers: useRequestHeaders(['cookie'])\n})\n",[591],{"type":67,"tag":117,"props":592,"children":593},{"__ignoreMap":61},[594,665,705],{"type":67,"tag":151,"props":595,"children":596},{"class":153,"line":154},[597,601,605,609,613,617,622,627,631,635,640,644,648,652,656,661],{"type":67,"tag":151,"props":598,"children":599},{"style":236},[600],{"type":78,"value":483},{"type":67,"tag":151,"props":602,"children":603},{"style":164},[604],{"type":78,"value":167},{"type":67,"tag":151,"props":606,"children":607},{"style":296},[608],{"type":78,"value":332},{"type":67,"tag":151,"props":610,"children":611},{"style":164},[612],{"type":78,"value":440},{"type":67,"tag":151,"props":614,"children":615},{"style":164},[616],{"type":78,"value":167},{"type":67,"tag":151,"props":618,"children":619},{"style":170},[620],{"type":78,"value":621}," libraries ",{"type":67,"tag":151,"props":623,"children":624},{"style":164},[625],{"type":78,"value":626},"}}",{"type":67,"tag":151,"props":628,"children":629},{"style":164},[630],{"type":78,"value":284},{"type":67,"tag":151,"props":632,"children":633},{"style":158},[634],{"type":78,"value":289},{"type":67,"tag":151,"props":636,"children":637},{"style":225},[638],{"type":78,"value":639}," useFetch",{"type":67,"tag":151,"props":641,"children":642},{"style":170},[643],{"type":78,"value":233},{"type":67,"tag":151,"props":645,"children":646},{"style":164},[647],{"type":78,"value":366},{"type":67,"tag":151,"props":649,"children":650},{"style":191},[651],{"type":78,"value":556},{"type":67,"tag":151,"props":653,"children":654},{"style":164},[655],{"type":78,"value":366},{"type":67,"tag":151,"props":657,"children":658},{"style":164},[659],{"type":78,"value":660},",",{"type":67,"tag":151,"props":662,"children":663},{"style":164},[664],{"type":78,"value":265},{"type":67,"tag":151,"props":666,"children":667},{"class":153,"line":201},[668,673,677,682,687,691,696,700],{"type":67,"tag":151,"props":669,"children":670},{"style":296},[671],{"type":78,"value":672},"  headers",{"type":67,"tag":151,"props":674,"children":675},{"style":164},[676],{"type":78,"value":440},{"type":67,"tag":151,"props":678,"children":679},{"style":225},[680],{"type":78,"value":681}," useRequestHeaders",{"type":67,"tag":151,"props":683,"children":684},{"style":170},[685],{"type":78,"value":686},"([",{"type":67,"tag":151,"props":688,"children":689},{"style":164},[690],{"type":78,"value":366},{"type":67,"tag":151,"props":692,"children":693},{"style":191},[694],{"type":78,"value":695},"cookie",{"type":67,"tag":151,"props":697,"children":698},{"style":164},[699],{"type":78,"value":366},{"type":67,"tag":151,"props":701,"children":702},{"style":170},[703],{"type":78,"value":704},"])\n",{"type":67,"tag":151,"props":706,"children":707},{"class":153,"line":211},[708,712],{"type":67,"tag":151,"props":709,"children":710},{"style":164},[711],{"type":78,"value":458},{"type":67,"tag":151,"props":713,"children":714},{"style":170},[715],{"type":78,"value":307},{"type":67,"tag":717,"props":718,"children":719},"style",{},[720],{"type":78,"value":721},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":61,"searchDepth":201,"depth":201,"links":723},[],"markdown","content:4.usage:services:1.serverSupabaseClient.md","content","4.usage/services/1.serverSupabaseClient.md","md",[730,732],{"_path":28,"title":27,"description":731},"Auto import and use your Supabase user with the useSupabaseUser composable",{"_path":38,"title":733,"description":734},"serverServiceRole","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",1711704508410]